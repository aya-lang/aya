/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.10/samples
 */

plugins {
    id 'application'
    id 'eclipse'
}

sourceSets {
    main {
        java {
            srcDirs 'src'
        }
    }
}

dependencies {
    implementation files('lib/big-math-2.3.0.jar')
    implementation files('lib/bigfraction-1.1.0-java7.jar')
    implementation files('lib/java-math-numerical.jar')
    implementation files('lib/jcommon-1.0.23.jar')
    implementation files('lib/jfreechart-1.0.19.jar')
    implementation files('lib/json-20190722.jar')
}

// Apply a specific Java toolchain to ease working on different environments.
java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(11)
    }
}
application {
  // Define the main class for the application.
  mainClass = 'ui.AyaIDE'
}

jar {
    manifest {
        attributes 'Main-Class': application.mainClass
    }

    // Build an all-in-one Jar
    archiveBaseName = 'aya'
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
    from { configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) } }

    // Move jar into root directory
    doLast {
        copy {
            from "$buildDir/libs/aya.jar"
            into '.'
        }
    }
}

//task copyDocs(type: Copy) {
//    from '$buildDir/libs/aya.jar'
//    into '.'
//}
//
//tasks.named("jar") { finalizedBy("copyDocs") }
